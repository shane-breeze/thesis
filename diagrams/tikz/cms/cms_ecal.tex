\documentclass[11pt,border=0pt]{standalone}

\usepackage{verbatim}
\usepackage{tikz}
\usepackage{tikz-3dplot}
\usetikzlibrary{calc,positioning,shadows.blur,decorations.markings,decorations.pathreplacing,arrows}
\usepackage{etoolbox}
\usepackage{mathpazo}
\usepackage[wby]{callouts}

\def\filename{diagrams/tikz/cms/images/cms_front_slice_ecal_v2.pdf}
\def\rightpos{5.2}
\def\scale{1.0}
\def\xrange{5}
\def\yrange{2.5}

\begin{document}
    \begin{tikzpicture}[scale=\scale]
        \definecolor{col_eb}{HTML}{CCEBC5}
        \definecolor{col_ee}{HTML}{7BCCC4}
        \definecolor{col_es}{HTML}{A8DDB5}
    
        \node (img) at (0,0) {\includegraphics[clip, width=10cm]{\filename}};
        
        \def\x{2.5}
        \def\y{-0.4}
        \draw (\rightpos,\y) node[right] {EB} -- (\x,\y);
        \filldraw (\x,\y) circle (1pt);
        \node[left] (tmp) at (-\rightpos,\y) {\phantom{EB}};
        \filldraw[col_eb] ({\rightpos+0.8},{\y-0.2}) rectangle ({\rightpos+1.2},{\y+0.2});
        \draw ({\rightpos+0.8},{\y-0.2}) rectangle ({\rightpos+1.2},{\y+0.2});
        
        \def\x{4}
        \def\y{1}
        \draw (\rightpos,\y) node[right] {EE} -- (\x,\y);
        \filldraw (\x,\y) circle (1pt);
        \node[left] (tmp) at (-\rightpos,\y) {\phantom{EE}};
        \filldraw[col_ee] ({\rightpos+0.8},{\y-0.2}) rectangle ({\rightpos+1.2},{\y+0.2});
        \draw ({\rightpos+0.8},{\y-0.2}) rectangle ({\rightpos+1.2},{\y+0.2});
        
        \def\x{3.4}
        \def\y{0.3}
        \draw (\rightpos,\y) node[right] {ES} -- (\x,\y);
        \filldraw (\x,\y) circle (1pt);
        \node[left] (tmp) at (-\rightpos,\y) {\phantom{ES}};
        \filldraw[col_es] ({\rightpos+0.8},{\y-0.2}) rectangle ({\rightpos+1.2},{\y+0.2});
        \draw ({\rightpos+0.8},{\y-0.2}) rectangle ({\rightpos+1.2},{\y+0.2});
        
        \draw[thick] (0,1.5) rectangle (3.5,2.1);
        \draw[thick] (3.5,1.8) -- (\rightpos,1.8) node[right]{Supermodule};
        \node[left] (tmp) at (-\rightpos,1.8) {\phantom{Supermodule}};
        
        \draw[thick] (3.7,-1.3) rectangle (4.2,-1.05);
        \draw[thick] (4.2,-1.175) -- (\rightpos,-1.175) node[right]{Supercrystal};
        \node[left] (tmp) at (-\rightpos,-1.175) {\phantom{Supercrystal}};
        
        %\draw[step=1cm] (-\xrange,-\yrange) grid (\xrange,\yrange);
        %\draw[thin,step=.1cm,black!60] (-\xrange,-\yrange) grid (\xrange,\yrange);
        %\draw[thick,>=stealth',->] ({-\xrange-1},0) -- ({\xrange+1},0) node [right] {$x$};
        %\draw[thick,>=stealth',->] (0,{-\yrange-1}) -- (0,{\yrange+1}) node [right] {$y$};
        
        \draw[thick,>=stealth',<->] (-4.3,2.3) -- node[above]{$672$ cm} (4.3,2.3);
        \draw[thick,>=stealth',<->] (-4.9,1.85) -- node[left]{$304$ cm} (-4.9,-1.85);
        
    \end{tikzpicture}
\end{document}